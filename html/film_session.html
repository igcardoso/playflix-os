<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" type="text/css" href="css/owl/owl.carousel.min.css">
  <link rel="stylesheet" type="text/css" href="css/owl/owl.theme.default.min.css">
  <link rel="stylesheet" href="../css/session_play/index.css" title="" type="text/css" />
  <link rel="stylesheet" href="css/global.css">
  <!-- ios support -->
  <link rel="apple-touch-icon" href="images/icons/icon-72x72.png">
  <link rel="apple-touch-icon" href="images/icons/icon-96x96.png">
  <link rel="apple-touch-icon" href="images/icons/icon-128x128.png">
  <link rel="apple-touch-icon" href="images/icons/icon-144x144.png">
  <link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
  <link rel="apple-touch-icon" href="images/icons/icon-192x192.png">
  <link rel="apple-touch-icon" href="images/icons/icon-384x384.png">
  <link rel="apple-touch-icon" href="images/icons/icon-512x512.png">
  <meta name="apple-mobile-web-app-status-bar" content="#EDEFEE">
  <meta name="theme-color" content="#EDEFEE">
  <!-- app photo guia -->
  <link rel="icon" href="images/icons/icon-512x512.png" type="image/png">

  <title>Infinix OS</title>
</head>
<body>
    <main>
        <header>
          <img class="background" src="" />
        </header>
        <div class="contentButtons">
          <button class="donwload">
            <svg width="26" height="26" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
              <g fill="none" fill-rule="evenodd" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" transform="translate(4 3)">
                <path d="m2.5 7.5 4 4.232 4-4.191" />
                <path d="m6.5.5v11" />
                <path d="m.5 14.5h12" />
              </g>
            </svg>
          </button>
          <button class="play">
            <svg width="26" height="26" viewBox="0 0 21 21" xmlns="http://www.w3.org/2000/svg">
              <g fill="none" fill-rule="evenodd" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" transform="translate(3 4)">
                <path d="m3.5 10.5-1-.0345601c-1.10193561-.0037085-2-.93261826-2-2.03456011v-5.9654399c0-1.1045695.8954305-2 2-2l10-.00245977c1.1045695 0 2 .8954305 2 2v6.00245977c0 1.1045695-.8954305 2.00000001-2 2.00000001-.0014957 0-.3348291.01234-1 .0370199" />
                <path d="m7.5 12.5-3-3h6z" transform="matrix(1 0 0 -1 0 22)" />
              </g>
            </svg>
            <span>Assistir</span>
          </button>
        </div>
        <p class="title"></p>
        <span class="vote"></span>
        <span class="plataforms">
          <span class="text"></span>
          <svg viewBox="-14.16 -14.16 52.32 52.32" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path fill-rule="evenodd" clip-rule="evenodd" d="M21.007 8.27C22.194 9.125 23 10.45 23 12c0 1.55-.806 2.876-1.993 3.73.24 1.442-.134 2.958-1.227 4.05-1.095 1.095-2.61 1.459-4.046 1.225C14.883 22.196 13.546 23 12 23c-1.55 0-2.878-.807-3.731-1.996-1.438.235-2.954-.128-4.05-1.224-1.095-1.095-1.459-2.611-1.217-4.05C1.816 14.877 1 13.551 1 12s.816-2.878 2.002-3.73c-.242-1.439.122-2.955 1.218-4.05 1.093-1.094 2.61-1.467 4.057-1.227C9.125 1.804 10.453 1 12 1c1.545 0 2.88.803 3.732 1.993 1.442-.24 2.956.135 4.048 1.227 1.093 1.092 1.468 2.608 1.227 4.05Zm-4.426-.084a1 1 0 0 1 .233 1.395l-5 7a1 1 0 0 1-1.521.126l-3-3a1 1 0 0 1 1.414-1.414l2.165 2.165 4.314-6.04a1 1 0 0 1 1.395-.232Z"></path></g></svg>
        </span>
        <p class="genere"></p>
        <p class="description"></p>
        <div class="actors"></div>
      </main>
      <script>
    
        // Função para obter o valor de um parâmetro na URL
        function getURLParameter(name) {
          name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
          var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
          var results = regex.exec(location.search);
          return results === null ? '': decodeURIComponent(results[1].replace(/\+/g, ' '));
        }
    
        var id = getURLParameter('DateId');
        //var id = 405774
        console.log(id)
    
        const API_KEY = 'api_key=1cf50e6248dc270629e802686245c2c8';
        const BASE_URL = 'https://api.themoviedb.org/3';
        const IMG_URL = 'https://image.tmdb.org/t/p/original';
    
    
    
        async function exibirPlataformaStreaming(filmeId) {
          const detalhesUrl = `${BASE_URL}/movie/${filmeId}?${API_KEY}`;
    
          try {
            const response = await fetch(detalhesUrl);
            const data = await response.json();
    
            const plataformas = data.production_companies.map(company => company.name);
           
            document.querySelector('.plataforms .text').innerHTML = plataformas[0];
    
            switch (plataformas[0]) {
              case "Disney+":
                document.querySelector('.plataforms svg').classList.add('disney');
                break;
              case "Netflix":
                document.querySelector('.plataforms svg').classList.add('netflix');
                break;
              case "HBO":
                document.querySelector('.plataforms svg').classList.add('hbo');
                break;
              case "Fox":
                document.querySelector('.plataforms svg').classList.add('fox');
                break;
            }
            // Check the streaming platforms and display the corresponding message
    
          } catch (error) {
            console.error('Ocorreu um erro:', error);
          }
        }
    
        exibirPlataformaStreaming(id);
    
    
    
        function exibirInformacoesFilme(idFilme) {
          const url = `${BASE_URL}/movie/${idFilme}?${API_KEY}&language=pt-BR`;
    
    
    
          fetch(url)
          .then(response => response.json())
          .then(filme => {
            // ...
    
            // Fetch movie show cast
            const castUrl = `${BASE_URL}/movie/${idFilme}/credits?${API_KEY}`;
            fetch(castUrl)
            .then(res => res.json())
            .then(castData => {
              // Log the name and photo URL of each actor
              castData.cast.forEach(actor => {
                console.log('Ator:', actor.name);
                console.log('Foto:', IMG_URL + actor.profile_path);
    
                const actorDiv = document.createElement('div');
                actorDiv.classList.add('actor');
    
                const actorPhoto = document.createElement('img');
                actorPhoto.src = IMG_URL +  actor.profile_path;
                actorPhoto.alt = actor.name;
                actorDiv.appendChild(actorPhoto);
    
                const actorName = document.createElement('p');
                actorName.innerText = actor.name;
                actorDiv.appendChild(actorName);
    
                document.querySelector('.actors').appendChild(actorDiv);
              });
            })
            .catch(error => console.error('Erro ao obter informações do elenco:', error));
    
    
            console.log('Título:', filme.title);
            console.log('Sinopse:', filme.overview);
            console.log('Data de lançamento:', filme.release_date);
            console.log('Avaliação:', filme.vote_average);
            console.log('Gêneros:', filme.genres.map(genero => genero.name).join(', '));
    
    
            document.querySelector('.background').src = IMG_URL + filme.backdrop_path
            document.querySelector('.title').innerText = filme.title
            document.querySelector('.vote').innerText = filme.vote_average + "%"
            document.querySelector('.genere').innerText = filme.genres.map(genero => genero.name).join(', ')
            document.querySelector('.description').innerText = filme.overview
    
    
            document.querySelector('.play').addEventListener('click', ()=> {
              let MovieID = function(valor) {
                window.location = "movie.html?minhaVariavel=" + valor;
              }
              let Movie_Id_Url = id;
              MovieID(Movie_Id_Url);
            });
          })
          .catch(error => console.error('Erro ao obter informações do filme:', error));
        }
    
        // Exemplo de uso da função
        exibirInformacoesFilme(id);
    
    
      </script>
</html>